# **üìñ¬†3Ï£ºÏ∞® Í≥ºÏ†ú 1 - Best Practice**

### **Í≥ºÏ†ú : ÏßàÌôòÎ™Ö Í≤ÄÏÉâÏãú Í≤ÄÏÉâÏñ¥ Ï∂îÏ≤ú** Î∞è API Ìò∏Ï∂ú ÏµúÏ†ÅÌôî

> Í∏∞Í∞Ñ :2022ÎÖÑ 11Ïõî 8Ïùº(Ìôî) - 2022ÎÖÑ 11Ïõî 11Ïùº(Í∏à)
> 

**üìé[Î∞∞Ìè¨ÎßÅÌÅ¨ Î∞îÎ°úÍ∞ÄÍ∏∞](https://main.d4qbjz8bpbyb0.amplifyapp.com/)**

# **üë®‚Äçüë©‚Äçüëß‚Äçüë¶¬†Members**

| ÏµúÏäπÏßÑ<br/>(ÌåÄÏû•)                                                                                     | ÏûÑÏ§ÄÌôç<br/>(Î∂ÄÌåÄÏû•)                                                                                 | Î¨∏ÎèÑÏó∞<br/>(ÏÑúÍ∏∞)                                                                                        | ÏµúÏõêÏò§<br/>(Î∂ÄÏÑúÍ∏∞)                                                                                     | ÏÜåÏú§Ìò∏<br/>(Î∂ÄÏÑúÍ∏∞)                                                                                 | ÏÑ†ÎØºÍ≤Ω<br/>(ÌåÄÏõê)                                                                                       | Í≥ΩÌòÑ<br/>(ÌåÄÏõê)                                                                                         | Ïù¥Ïú†ÏßÑ<br/>(ÌåÄÏõê)                                                                                       |
| ----------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------- |
| <img src="https://avatars.githubusercontent.com/u/46988995?v=4" alt="tooooo1" width="60" height="60"> | <img src="https://avatars.githubusercontent.com/u/67459853?v=4" alt="helen" width="60" height="60"> | <img src="https://avatars.githubusercontent.com/u/102936206?v=4" alt="magictaro" width="60" height="60"> | <img src="https://avatars.githubusercontent.com/u/99406837?v=4" alt="magictaro" width="60" height="60"> | <img src="https://avatars.githubusercontent.com/u/30254570?v=4" alt="flora" width="60" height="60"> | <img src="https://avatars.githubusercontent.com/u/76088728?v=4" alt="magictaro" width="60" height="60"> | <img src="https://avatars.githubusercontent.com/u/73919235?v=4" alt="magictaro" width="60" height="60"> | <img src="https://avatars.githubusercontent.com/u/42020919?v=4" alt="magictaro" width="60" height="60"> |
| <a href="https://github.com/yondo123">yondo123<a/>| <a href="https://github.com/tesseractjh">tesseractjh<a/> | <a href="https://github.com/Moondoyeon">Moondoyeon</a>| <a href="https://github.com/choi1five">choi1five<a/>                                                                                               | <a href="https://github.com/younhoso">younhoso<a/>                                                                                            | <a href="https://github.com/seonsy44">seonsy44<a/>                                                                                                | <a href="https://github.com/kwakhyun">kwakhyun<a/>                                                                                                | <a href="https://github.com/2ujin">2ujin<a/>                                                                                                   |

# **üñ•¬†Demo**

![search-keyword](https://user-images.githubusercontent.com/102936206/201240156-017813ca-c9eb-4b8c-98a6-6d043f95c4f2.gif)

# **‚ö°Ô∏è¬†Skills**


<div align="center">

![TypeScript](https://img.shields.io/badge/TypeScript-2F74C0.svg?&style=for-the-badge&logo=TypeScript&logoColor=white)
![React](https://img.shields.io/badge/react-%2320232a.svg?style=for-the-badge&logo=react&logoColor=%2361DAFB)
![Recoil](https://img.shields.io/badge/recoil-f26b00?style=for-the-badge&logo=data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MDAiIGhlaWdodD0iNjAwIiB2aWV3Qm94PSIwIDAgNjAwIDYwMCI+PGxpbmsgeG1sbnM9IiIgdHlwZT0idGV4dC9jc3MiIGlkPSJkYXJrLW1vZGUiIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iIi8+PGcgZmlsbD0id2hpdGUiPjxwYXRoIGQ9Ik0xNDIuNTM2IDE5OC44NThjMCAyNi4zNi0yMS4zNjggNDcuNzItNDcuNzIgNDcuNzItMjYuMzYgMC00Ny43MjItMjEuMzYtNDcuNzIyLTQ3LjcyczIxLjM2LTQ3LjcyIDQ3LjcyLTQ3LjcyYzI2LjM1NSAwIDQ3LjcyMiAyMS4zNiA0Ny43MjIgNDcuNzIiLz48cGF0aCBkPSJNNTA1LjE4IDQxNC4yMjVIMjM4LjEyNGMtMzUuMjUgMC02My45MjYtMjguNjc0LTYzLjkyNi02My45MjNzMjguNjc4LTYzLjkyNiA2My45MjYtNjMuOTI2aDEyMC43OGMyMC44MTYgMCAzNy43NTMtMTYuOTM4IDM3Ljc1My0zNy43NTZzLTE2LjkzOC0zNy43NTYtMzcuNzUzLTM3Ljc1Nkg5NC44MWMtNy4yMjcgMC0xMy4wODYtNS44Ni0xMy4wODYtMTMuMDg1IDAtNy4yMjcgNS44Ni0xMy4wODYgMTMuMDg1LTEzLjA4NmgyNjQuMDkzYzM1LjI1IDAgNjMuOTIzIDI4LjY3OCA2My45MjMgNjMuOTI2cy0yOC42NzQgNjMuOTIzLTYzLjkyMyA2My45MjNoLTEyMC43OGMtMjAuODIgMC0zNy43NTYgMTYuOTM4LTM3Ljc1NiAzNy43NiAwIDIwLjgxNiAxNi45MzggMzcuNzUzIDM3Ljc1NiAzNy43NTNINTA1LjE4YzcuMjI3IDAgMTMuMDg2IDUuODYgMTMuMDg2IDEzLjA4NSAwIDcuMjI2LTUuODU4IDEzLjA4NS0xMy4wODUgMTMuMDg1eiIvPjxwYXRoIGQ9Ik00NTcuNDY0IDQwMS4xNDJjMC0yNi4zNiAyMS4zNi00Ny43MiA0Ny43Mi00Ny43MnM0Ny43MiAyMS4zNiA0Ny43MiA0Ny43Mi0yMS4zNiA0Ny43Mi00Ny43MiA0Ny43Mi00Ny43Mi0yMS4zNi00Ny43Mi00Ny43MiIvPjwvZz48c3R5bGUgeG1sbnM9IiIgaWQ9ImRhcmstbW9kZS1jdXN0b20tY29sb3IiPgoJCTpyb290ewoJCQktLWJnLWNvbG9yOnJnYmEoMjYsMjYsMjYsMSk7CgkJCS0tdGV4dC1jb2xvcjpyZ2JhKDExMCwxMTAsMTEwLDEpOwoJCQktLWEtY29sb3I6cmdiYSg5MCwxMjAsMTIwLDEpOwoJCQktLWEtdmlzaXRlZC1jb2xvcjpyZ2JhKDEyMCwxMjAsOTAsMSk7CgkJCS0tYS1ob3Zlci1jb2xvcjpyZ2JhKDIxMSwyMTEsMjExLDEpOwoJCQktLWlucHV0LWJvcmRlci1jb2xvcjpyZ2JhKDIxMSwyMTEsMjExLDAuMik7CgkJCS0taW5wdXQtcGxhY2Vob2xkZXItY29sb3I6cmdiYSgxNzMsMjE2LDIzMCwxKTsKCQkJLS1kaWFsb2ctYmctY29sb3I6cmdiYSgzNiwzNiwzNiwwLjk1KTsKCQkJLS1iZy1pbWFnZTpsaW5lYXItZ3JhZGllbnQocmdiYSgyNiwyNiwyNiwxKSxyZ2JhKDI2LDI2LDI2LDEpKTsKCQl9Cgk8L3N0eWxlPjwvc3ZnPg==)
![axios](https://camo.githubusercontent.com/23392fa4fc3ffb6ade29cba7aaffa7741daeb97012c70a062cf2370187d6519e/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6178696f732d4646434132383f7374796c653d666f722d7468652d6261646765266c6f676f3d6178696f73266c6f676f436f6c6f723d7768697465)
![Styled Components](https://img.shields.io/badge/styled--components-DB7093?style=for-the-badge&logo=styled-components&logoColor=white)

</div>


# **üöÄ¬†Í∏∞Îä•ÏöîÍµ¨ÏÇ¨Ìï≠**

- ÏïÑÎûò ÏÇ¨Ïù¥Ìä∏Ïùò Í≤ÄÏÉâÏòÅÏó≠ÏùÑ ÌÅ¥Î°†ÌïòÍ∏∞
    
    [ÌïúÍµ≠ÏûÑÏÉÅÏ†ïÎ≥¥](https://clinicaltrialskorea.com/)
    
- ÏßàÌôòÎ™Ö Í≤ÄÏÉâÏãú API Ìò∏Ï∂ú ÌÜµÌï¥ÏÑú Í≤ÄÏÉâÏñ¥ Ï∂îÏ≤ú Í∏∞Îä• Íµ¨ÌòÑ
    - ÏÇ¨Ïö©ÏûêÍ∞Ä ÏûÖÎ†•Ìïú ÌÖçÏä§Ìä∏ÏôÄ ÏùºÏπòÌïòÎäî Î∂ÄÎ∂Ñ Î≥ºÎìúÏ≤òÎ¶¨
        - Ïòà) ÏÇ¨Ïö©Ïûê ÏûÖÎ†•: Îã¥ÎÇ≠
              Ï∂îÏ≤ú Í≤ÄÏÉâÏñ¥:¬† **Îã¥ÎÇ≠**Ïùò ÏïÖÏÑ± Ïã†ÏÉùÎ¨º, **Îã¥ÎÇ≠**Ïóº, **Îã¥ÎÇ≠**Ïùò Í∏∞ÌÉÄ ÏßàÌôò
    - Í≤ÄÏÉâÏñ¥Í∞Ä ÏóÜÏùÑ Ïãú ‚ÄúÍ≤ÄÏÉâÏñ¥ ÏóÜÏùå‚Äù ÌëúÏ∂ú
- API Ìò∏Ï∂ú ÏµúÏ†ÅÌôî
    - API Ìò∏Ï∂úÎ≥ÑÎ°ú Î°úÏª¨ Ï∫êÏã± Íµ¨ÌòÑ
    - ÏûÖÎ†•ÎßàÎã§ API Ìò∏Ï∂úÌïòÏßÄ ÏïäÎèÑÎ°ù API Ìò∏Ï∂ú ÌöüÏàòÎ•º Ï§ÑÏù¥Îäî Ï†ÑÎûµ ÏàòÎ¶Ω Î∞è Ïã§Ìñâ
- ÌÇ§Î≥¥ÎìúÎßåÏúºÎ°ú Ï∂îÏ≤ú Í≤ÄÏÉâÏñ¥Îì§Î°ú Ïù¥Îèô Í∞ÄÎä•ÌïòÎèÑÎ°ù

# üì¶¬†ÌååÏùº Íµ¨Ï°∞

```
üì¶src
 ‚î£ üìÇapi
 ‚îÉ ‚îó üìúsuggestion.ts
 ‚î£ üìÇassets
 ‚îÉ ‚îó üìÇicons
 ‚îÉ ‚îÉ ‚î£ üìúmagnifier.svg
 ‚îÉ ‚îÉ ‚îó üìúxmark-solid.svg
 ‚î£ üìÇcomponents
 ‚îÉ ‚îó üìÇSearchBar
 ‚îÉ ‚îÉ ‚î£ üìúClearButton.tsx
 ‚îÉ ‚îÉ ‚î£ üìúInput.tsx
 ‚îÉ ‚îÉ ‚î£ üìúParsedName.tsx
 ‚îÉ ‚îÉ ‚î£ üìúSearchButton.tsx
 ‚îÉ ‚îÉ ‚î£ üìúSuggestion.tsx
 ‚îÉ ‚îÉ ‚î£ üìúSuggestionList.tsx
 ‚îÉ ‚îÉ ‚îó üìúindex.tsx
 ‚î£ üìÇhooks
 ‚îÉ ‚î£ üìúuseClear.ts
 ‚îÉ ‚î£ üìúuseInput.ts
 ‚îÉ ‚î£ üìúuseKeyboard.ts
 ‚îÉ ‚î£ üìúuseSearchInput.ts
 ‚îÉ ‚î£ üìúuseSetSuggestions.ts
 ‚îÉ ‚î£ üìúuseSuggestionFocus.ts
 ‚îÉ ‚îó üìúuseSuggestions.ts
 ‚î£ üìÇrecoil
 ‚îÉ ‚î£ üìÇsearchBar
 ‚îÉ ‚îÉ ‚îó üìúindex.ts
 ‚îÉ ‚îó üìÇsuggestion
 ‚îÉ ‚îÉ ‚îó üìúindex.ts
 ‚î£ üìÇstyles
 ‚îÉ ‚î£ üìÇtheme
 ‚îÉ ‚îÉ ‚î£ üìúcolor.ts
 ‚îÉ ‚îÉ ‚î£ üìúindex.ts
 ‚îÉ ‚îÉ ‚î£ üìúmixin.ts
 ‚îÉ ‚îÉ ‚îó üìúresponsive.ts
 ‚îÉ ‚îó üìúGlobalStyle.ts
 ‚î£ üìÇtypes
 ‚îÉ ‚îó üìúindex.d.ts
 ‚î£ üìÇutils
 ‚îÉ ‚î£ üìúdebounce.ts
 ‚îÉ ‚îó üìúsortTiralData.ts
 ‚î£ üìúApp.tsx
 ‚î£ üìúindex.tsx
 ‚îó üìúreact-app-env.d.ts
```

# **üëç¬†Best Practice**

## 1. Debounce

- debounce Ìï®ÏàòÎ•º Íµ¨ÌòÑÌïòÏòÄÏäµÎãàÎã§.
    - ÏßßÏùÄ ÏãúÍ∞Ñ Í∞ÑÍ≤©ÏúºÎ°ú Î∞úÏÉùÌïòÎäî Ïù¥Î≤§Ìä∏Î•º Í∑∏Î£πÌôîÌï¥ÏÑú ÎßàÏßÄÎßâÏóê Ìïú Î≤àÎßå Ïù¥Î≤§Ìä∏ Ìï∏Îì§Îü¨Í∞Ä Ìò∏Ï∂úÎêòÎèÑÎ°ù ÌïòÏòÄÏäµÎãàÎã§.
    
    ```tsx
    // utils/debounce.ts
    const debounce = (callback: (...args: unknown[]) => void, delay: number) => {
      let timerId: NodeJS.Timeout;
      return (...args: unknown[]) => {
        if (timerId) {
          clearTimeout(timerId);
        }
        timerId = setTimeout(callback, delay, ...args);
      };
    };
    
    export default debounce;
    ```
    
    ```tsx
    // hooks/useSetSuggestions.ts
    debounce(async () => {
        await handleSuggestionChange();
      }, 300);
    }
    ```
    

## 2. API Î°úÏª¨ Ï∫êÏã±

- Ï†ÑÏó≠ ÏÉÅÌÉú


```tsx
// recoil/searchBar/index.ts
// InputÏóê ÏûÖÎ†•Îêú Í≤ÄÏÉâÏñ¥ atom
export const searchInputState = atom<string>({
  key: 'searchInputState',
  default: '',
});
```

```tsx
// recoil/searchBar/index.ts
// Í≤ÄÏÉâÏñ¥Ïóê Îî∞Î•∏ Ï∂îÏ≤ú Í≤ÄÏÉâÏñ¥ atomFamily
// Í≤ÄÏÉâÏñ¥Î•º parameterÎ°ú Î∞õÏïÑÏÑú ÎèôÏ†ÅÏúºÎ°ú atom ÏÉùÏÑ±
export const suggestionState = atomFamily<Sick[] | null, string>({
  key: 'suggestionState',
  default: null,
});
```

Í∞Å Í≤ÄÏÉâÏñ¥Î≥ÑÎ°ú ÎèôÏ†ÅÏúºÎ°ú atomÏùÑ ÏÉùÏÑ±Ìï† Ïàò ÏûàÎèÑÎ°ù `atomFamily`Î•º ÌÜµÌï¥ Í≤ÄÏÉâÏñ¥Î≥Ñ Ï∂îÏ≤ú Í≤ÄÏÉâÏñ¥ Î™©Î°ùÏùÑ Ï†ÄÏû•ÌïòÏòÄÏäµÎãàÎã§.

- Î°úÏª¨ Ï∫êÏã± Íµ¨ÌòÑ

```tsx
// recoil/searchBar/index.ts
type Option = {
  cacheTime: number;
};

function useSetSuggestions(option?: Option) {
  const { cacheTime = 5 * 60 * 1000 } = option ?? {};
  // useRecoilCallbackÏúºÎ°ú ÎÇ¥Î∂ÄÏóêÏÑú Recoil ÏÉÅÌÉúÏóê Ï†ëÍ∑º
  const handleSuggestionChange = useRecoilCallback(
    ({ snapshot, set, reset }) =>
      async () => {
				// ÌòÑÏû¨ Í≤ÄÏÉâÏñ¥(searchInputState) Í∞í Í∞ÄÏ†∏Ïò§Í∏∞
        const inputValue = await snapshot.getPromise(searchInputState);

        // Í≤ÄÏÉâÏñ¥Í∞Ä ÏóÜÏúºÎ©¥(Îπà Î¨∏ÏûêÏó¥Ïù¥Î©¥) API Ìò∏Ï∂ú X
        if (!inputValue.trim()) {
          return;
        }

        // ÌòÑÏû¨ Í≤ÄÏÉâÏñ¥Ïóê ÎåÄÌïú Ï∂îÏ≤ú Í≤ÄÏÉâÏñ¥(suggestionState(inputValue)) Í∞í Í∞ÄÏ†∏Ïò§Í∏∞
        const prevValue = await snapshot.getPromise(suggestionState(inputValue));

				// Í≤ÄÏÉâÏñ¥Ïóê ÎåÄÌïú Ï∂îÏ≤ú Í≤ÄÏÉâÏñ¥Í∞Ä Ïù¥ÎØ∏ Ï°¥Ïû¨ÌïúÎã§Î©¥(Ìò∏Ï∂úÎêú Ï†ÅÏù¥ ÏûàÎã§Î©¥) API Ìò∏Ï∂ú X
        if (prevValue) {
          return;
        }

				// API Ìò∏Ï∂ú
        const { data, status, errorMsg } = await getSuggestions(inputValue);
        console.info('calling api');
        if (status >= 200 && status < 300) {
					// Ï∂îÏ≤ú Í≤ÄÏÉâÏñ¥ Í∞±Ïã†
          set(suggestionState(inputValue), data.sort(sortTrialData(inputValue)));
					// cacheTime Ïù¥ÌõÑÏóê Ï∂îÏ≤ú Í≤ÄÏÉâÏñ¥ resetÌïòÎäî Timeout ÏÑ§Ï†ï
					// resetÌïòÎ©¥ suggestionState(inputValue)Îäî Í∏∞Î≥∏Í∞íÏù∏ nullÎ°ú Î≥ÄÌï®
          setTimeout(() => reset(suggestionState(inputValue)), cacheTime);
        } else {
          alert(errorMsg.default);
        }
      },
    []
  );

  // debounceÎ°ú API Ìò∏Ï∂ú ÌöüÏàò ÏµúÏ†ÅÌôî
  return debounce(async () => {
    await handleSuggestionChange();
  }, 300);
}
```

```tsx
// hooks/useSearchInput.ts

function useSearchInput() {
  const [inputState, setInputState] = useRecoilState(searchInputState);
  const setSuggestions = useSetSuggestions({ cacheTime: 2 * 60 * 1000 });

  // Í≤ÄÏÉâÏñ¥ ÏûÖÎ†• Input Ïª¥Ìè¨ÎÑåÌä∏Ïùò onChange Ïù¥Î≤§Ìä∏ Ìï∏Îì§Îü¨
  const handleInputChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {
    const {
      currentTarget: { value },
    } = e;
    setInputState(value);
    setSuggestions();
  }, []);

  return { value: inputState, handleChange: handleInputChange };
}
```

- Input Ïª¥Ìè¨ÎÑåÌä∏ÏóêÏÑú change Ïù¥Î≤§Ìä∏Í∞Ä Î∞úÏÉùÌï† ÎïåÎßàÎã§ setSuggestionÏù¥ Ïã§ÌñâÎêòÎ©∞ ÌòÑÏû¨ Í≤ÄÏÉâÏñ¥Ïóê ÎåÄÌïú Ï∂îÏ≤ú Í≤ÄÏÉâÏñ¥ Î™©Î°ùÏù¥ Ï°¥Ïû¨ÌïòÎäîÏßÄ Ïó¨Î∂ÄÎ•º ÌÜµÌï¥ APIÎ•º Ìò∏Ï∂ú Ïó¨Î∂ÄÎ•º Í≤∞Ï†ïÌï©ÎãàÎã§. 
- ÎßåÏïΩ APIÍ∞Ä Ìò∏Ï∂úÎêòÏóàÎã§Î©¥ setTimeoutÏùÑ ÌÜµÌï¥ cacheTime Ïù¥ÌõÑÏóê ÌòÑÏû¨ Í≤ÄÏÉâÏñ¥Ïóê ÎåÄÌïú Ï∂îÏ≤ú Í≤ÄÏÉâÏñ¥ Î™©Î°ùÏùÑ Ï¥àÍ∏∞Ìôî(null)Ìï©ÎãàÎã§.

```tsx
// hooks/useSearchInput.ts

function useSuggestions() {
  const inputValue = useRecoilValue(searchInputState);
  const suggestionValue = useRecoilValue(suggestionState(inputValue));
  // suggestionValueÎ•º ÏßÅÏ†ë ÏÇ¨Ïö©ÌïòÏßÄ ÏïäÍ≥† Î≥ÑÎèÑÏùò stateÎ•º ÎßåÎì¶
  // suggestionState(inputValue)Í∞Ä cacheTimeÏù¥ Îã§ ÎêòÏñ¥ resetÎê† Îïå nullÏù¥ Îê®
  // Í∑∏ Îïå ÌôîÎ©¥Ïóê Ï∂îÏ≤ú Í≤ÄÏÉâÏñ¥Í∞Ä ÏÇ¨ÎùºÏßÄÏßÄ ÏïäÍ≥† Ïù¥Ï†Ñ Í∞íÏùÑ Í≥ÑÏÜç ÎÇòÌÉÄÎÇ¥ÎèÑÎ°ù ÌïòÍ∏∞ ÏúÑÌï®
  const [suggestions, setSuggestions] = useState<Sick[]>([]);

  useEffect(() => {
		// suggestionValueÍ∞Ä nullÏù¥ ÏïÑÎãê ÎïåÏóêÎßå suggestionsÎ•º Î≥ÄÍ≤ΩÌï®
    // cacheTimeÏù¥ Îã§ ÎêòÏñ¥ suggestionValueÍ∞Ä nullÏù¥ ÎêòÎçîÎùºÎèÑ Ïù¥Ï†Ñ Í∞íÏùÑ Í≥ÑÏÜç Î≥¥Ïó¨Ï§å
    if (suggestionValue) {
      setSuggestions(suggestionValue);
    }
  }, [suggestionValue]);

  return { inputValue, suggestions };
}
```

- cacheTimeÏù¥ Îã§ ÎêòÏñ¥ resetÎê† Îïå ÌòÑÏû¨ Í≤ÄÏÉâÏñ¥Ïóê ÎåÄÌïú Ï∂îÏ≤ú Í≤ÄÏÉâÏñ¥ Î™©Î°ù(suggestionState(inputValue))Ïù¥ nullÎ°ú Ï¥àÍ∏∞ÌôîÎê©ÎãàÎã§.  
- Ïù¥ Îïå ÎßåÏïΩ Ìï¥Îãπ Ï∂îÏ≤ú Í≤ÄÏÉâÏñ¥ Î™©Î°ùÏù¥ ÌôîÎ©¥Ïóê ÌëúÏãúÎêòÍ≥† ÏûàÎã§Î©¥ Í≤ÄÏÉâÏñ¥ Î™©Î°ùÏù¥ Î∑∞ÏóêÏÑú Í∞ôÏù¥ ÏÇ¨ÎùºÏßÄÏßÄ ÏïäÎèÑÎ°ù Î≥ÑÎèÑÏùò stateÎ•º ÎßåÎì§Ïñ¥ÏÑú suggestionState(inputValue)Í∞Ä nullÏù¥ ÏïÑÎãê ÎïåÏóêÎßå Î≥ÄÍ≤ΩÌïòÏòÄÏäµÎãàÎã§.



> stale-while-revalidate Î°úÏßÅ Ï†ÅÏö©ÏùÑ ÏãúÎèÑÌïú ÏΩîÎìú ÏÇ¨Î°ÄÎèÑ ÏûàÏóàÏäµÎãàÎã§.
Î°úÏßÅ Íµ¨ÌòÑÏù¥ ÏôÑÏÑ±ÎêòÏßÄ ÏïäÏïÑ ÏΩîÎìúÎ•º Ï±ÑÌÉùÌïòÏßÄÎäî ÏïäÏïòÏäµÎãàÎã§.
<img width="507" alt="Untitled" src="https://user-images.githubusercontent.com/102936206/201242768-dd18fc11-8970-46a1-8341-f5e6169796bd.png">

```tsx
const cacheConfig: CacheConfig = {
  cache: new Map<string, Response>(),
  fetch: () => undefined,
};

const CacheContext = createContext(cacheConfig);

export const useCache = () => useContext(CacheContext);

export function CacheProvider({ children }: CacheProviderProps) {
  const fetch: CacheConfig['fetch'] = async (url, api, apiConfig, { onSuccess, onError }) => {
    // Ï∫êÏã±Ïù¥ ÎêòÏñ¥ ÏûàÎäî Í≤ΩÏö∞ Ï∫êÏã±Îêú Í∞íÏùÑ Î®ºÏ†Ä ÎÇ¥Ïñ¥Ï£ºÍ≥†, staleÌïú Ï∫êÏãú Í∞íÏùÑ ÏóÖÎç∞Ïù¥Ìä∏
		if (cacheConfig.cache.has(url)) {
      onSuccess(cacheConfig.cache.get(url));

      const { data, status } = await api(apiConfig);
      if (status >= 200 && status < 300) cacheConfig.cache.set(url, data);

      return;
    }
		
		// Ï∫êÏã±Ïù¥ ÏïàÎêòÏñ¥ ÏûàÎäî Í≤ΩÏö∞ ÏöîÏ≤≠ÏùÑ Î≥¥ÎÉÑ
    const { data, status } = await api(apiConfig);
    console.info('calling api');

    if (status >= 200 && status < 300) {
      cacheConfig.cache.set(url, data);
      onSuccess(data);
    } else if (onError) {
      onError(status);
    }
  };

  return React.createElement(
    CacheContext.Provider,
    { value: { cache: cacheConfig.cache, fetch } },
    React.Children.only(children)
  );
}
```

## 3. Ï∂îÏ≤ú Í≤ÄÏÉâÏñ¥ ÏÉÅÌïò Ïù¥Îèô

- useRefÎ•º ÌÜµÌï¥ `ul` ÌÉúÍ∑∏Î•º Ï∞∏Ï°∞Ìï©ÎãàÎã§.
- useStateÎ•º ÌÜµÌï¥ `focusIndex` ÏÉÅÌÉú Í¥ÄÎ¶¨Î•º Ìï©ÎãàÎã§.
- ÌäπÏ†ï ÌÇ§Î≥¥ÎìúÏù¥Î≤§Ìä∏ Î∞úÏÉùÏãú `focusIndex`Í∞Ä Î≥ÄÌïòÎèÑÎ°ù Ìï©ÎãàÎã§. (default: -1)
- `ul` > `li[focusIndex]` > `a` ÌÉúÍ∑∏Ïóê focus Ìï©ÎãàÎã§.

```tsx
// hooks/useKeyboard.ts

import { useEffect, useState } from 'react';
import useSuggestions from './useSuggestions';

function useKeyboard(inputRef: React.RefObject<HTMLInputElement>, elRef: React.RefObject<HTMLElement>) {
  const { inputValue } = useSuggestions();
  const [focusIndex, setFocusIndex] = useState<number>(-1);
  const ANCHOR_INDEX = 0;

  const handleKeyDown = (e: React.KeyboardEvent) => {
    if (e.nativeEvent.isComposing) return;

    switch (e.key) {
      case 'Tab':
        setFocusIndex((cur) => {
          if (elRef.current?.childElementCount === cur + 1) return cur;
          e.preventDefault();
          return cur + 1;
        });
        break;

      case 'ArrowDown':
        e.preventDefault();
        setFocusIndex((cur) => {
          if (elRef.current?.childElementCount === cur + 1) return cur;
          return cur + 1;
        });
        break;
      case 'ArrowUp':
        e.preventDefault();
        setFocusIndex((cur) => {
          if (cur === 0 || cur === -1) {
            inputRef.current?.focus();
            return -1;
          }
          return cur - 1;
        });
        break;
      default:
        break;
    }
  };

  useEffect(() => {
		// ul > li[focusIndex] > a.focus()
    const focusedEl = elRef.current?.children[focusIndex]?.children[ANCHOR_INDEX] as HTMLElement | undefined;
    focusedEl?.focus();
  }, [focusIndex]);

  useEffect(() => {
    setFocusIndex(-1);
  }, [inputValue]);

  return { handleKeyDown };
}

export default useKeyboard;
```

```tsx
// components/SearchBar/index.tsx

function SearchBar() {
  const { searchInputRef, isFocused } = useInput();
  const suggestionListRef = useRef<HTMLUListElement>(null);
  const { handleKeyDown } = useKeyboard(searchInputRef, suggestionListRef);

  return (
    <Container>
      <Input searchInputRef={searchInputRef} />
      <SuggestionList suggestionListRef={suggestionListRef} /> {/* -> ul ÌÉúÍ∑∏ */}
      <ClearButton />
      <SearchButton />
    </Container>
  );
}
```

## 4. Í≤ÄÏÉâÏñ¥ Î≥ºÎìúÏ≤òÎ¶¨

- `RegExp`Î•º ÏÇ¨Ïö©: Íµ¨Î∂ÑÏûêÎèÑ Í≤∞Í≥ºÏóê Ìè¨Ìï®ÌïúÏ±ÑÎ°ú `split`ÌïòÏó¨ `query`(Í≤ÄÏÉâÌÇ§ÏõåÎìú)ÏôÄ ÏùºÏπòÌï† Í≤ΩÏö∞ Bold Ï≤òÎ¶¨Ìï©ÎãàÎã§.

```tsx
// componentx/Searchbar/ParsedName.tsx

function ParsedName({ suggestionName, query }: Props) {
  const splitList = suggestionName.split(new RegExp(`(${query})`));

  return (
    <>
      {splitList.map((word) => (
        <React.Fragment key={word}> {word === query ? <Bold>{query}</Bold> : <div>{word}</div>}</React.Fragment>
      ))}
    </>
  );
}
```

## 5. AWS AmplifyÎ•º ÏÇ¨Ïö©ÌïòÏó¨ ÏûêÎèôÎ∞∞Ìè¨

- AWSÏóêÏÑú Ï†úÍ≥µÌïòÎäî AmplifyÎ•º ÏÇ¨Ïö©ÌïòÏó¨ `Main` Î∏åÎûúÏπòÏóê Ìë∏Ïãú Îê† Îïå ÎπåÎìú ÌõÑ ÏûêÎèôÎ∞∞Ìè¨ ÎêòÎèÑÎ°ù Íµ¨Ï∂ïÌïòÏòÄÏäµÎãàÎã§.

# **üì¢¬†ÌîÑÎ°úÏ†ùÌä∏ Ïã§ÌñâÎ∞©Î≤ï**

Ïã§ÌñâÌï† Îïå Î∞òÎìúÏãú Îã§Ïùå ÌååÏùºÏùÑ ÏµúÏÉÅÎã®Ïóê ÏÉùÏÑ±ÌõÑ Ïã§Ìñâ Ìï¥Ï£ºÏÖîÏïº Ìï©ÎãàÎã§.

```jsx
// .env.local
REACT_APP_SERVER = http://localhost:4000
REACT_APP_CLINICAL_TRIALS_KOREA = https://clinicaltrialskorea.com/studies
```

```jsx
// ÏÑ§Ïπò
npm install

// Ïã§Ìñâ
npm start
```

# **üìö¬†ÌåÄ Í∑úÏπô**

- **üìï¬†Git commit convention**
    
    
    | rule | ÏÑ§Î™Ö |
    | --- | --- |
    | Feat | ÏÉàÎ°úÏö¥ Í∏∞Îä• Ï∂îÍ∞Ä |
    | Fix | Î≤ÑÍ∑∏ Í≥†Ïπú Í≤ΩÏö∞ |
    | Design | css ÏàòÏ†ï |
    | Chore | ÎπåÎìú ÏóÖÎ¨¥ ÏàòÏ†ï, Ìå®ÌÇ§ÏßÄ Îß§ÎãàÏ†Ä ÏàòÏ†ï |
    | !HOTFIX | Í∏âÌïòÍ≤å ÏπòÎ™ÖÏ†ÅÏù∏ Î≤ÑÍ∑∏Î•º Í≥†Ï≥êÏïºÌïòÎäî Í≤ΩÏö∞ |
    | Docs | Î¨∏ÏÑú ÏàòÏ†ï |
    | Style | ÏΩîÎìú formatting, ÏÑ∏ÎØ∏ÏΩúÎ°†(;) ÎàÑÎùΩ, ÏΩîÎìú Î≥ÄÍ≤ΩÏù¥ ÏóÜÎäî Í≤ΩÏö∞ |
    | Rename | ÌååÏùº Î∞è Ìè¥Îçî Íµ¨Ï°∞ Î≥ÄÍ≤Ω |
    | Refactor | ÏΩîÎìú Î¶¨Ìå©ÌÜ†ÎßÅ |
    | Test | ÌÖåÏä§Ìä∏ ÏΩîÎìú, Î¶¨Ìå©ÌÜ†ÎßÅ ÌÖåÏä§Ìä∏ ÏΩîÎìú Ï∂îÍ∞Ä |
    | Remove | ÌååÏùº ÏÇ≠Ï†ú |
    | Modify | ÏΩîÎìú Îã®Ïàú ÏàòÏ†ï |
- **üìò¬†Git branch strategy**
- main (Î∞∞Ìè¨/Ïö¥ÏòÅ) ‚Üê develop (ÌÜµÌï© Í∞úÎ∞ú) ‚Üê feat-Í∞úÎ∞úÎÇ¥Ïö© (Îã®ÏúÑ Í∞úÎ∞ú)
