# **ğŸ“–Â 3ì£¼ì°¨ ê³¼ì œ 1 - Best Practice**

### **ê³¼ì œ : ì§ˆí™˜ëª… ê²€ìƒ‰ì‹œ ê²€ìƒ‰ì–´ ì¶”ì²œ** ë° API í˜¸ì¶œ ìµœì í™”

> ê¸°ê°„ :2022ë…„ 11ì›” 8ì¼(í™”) - 2022ë…„ 11ì›” 11ì¼(ê¸ˆ)
> 

**ğŸ“[ë°°í¬ë§í¬ ë°”ë¡œê°€ê¸°](https://main.d4qbjz8bpbyb0.amplifyapp.com/)**

# **ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦Â Members**

| ìµœìŠ¹ì§„<br/>(íŒ€ì¥)                                                                                     | ì„ì¤€í™<br/>(ë¶€íŒ€ì¥)                                                                                 | ë¬¸ë„ì—°<br/>(ì„œê¸°)                                                                                        | ìµœì›ì˜¤<br/>(ë¶€ì„œê¸°)                                                                                     | ì†Œìœ¤í˜¸<br/>(ë¶€ì„œê¸°)                                                                                 | ì„ ë¯¼ê²½<br/>(íŒ€ì›)                                                                                       | ê³½í˜„<br/>(íŒ€ì›)                                                                                         | ì´ìœ ì§„<br/>(íŒ€ì›)                                                                                       |
| ----------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------- |
| <img src="https://avatars.githubusercontent.com/u/46988995?v=4" alt="tooooo1" width="60" height="60"> | <img src="https://avatars.githubusercontent.com/u/67459853?v=4" alt="helen" width="60" height="60"> | <img src="https://avatars.githubusercontent.com/u/102936206?v=4" alt="magictaro" width="60" height="60"> | <img src="https://avatars.githubusercontent.com/u/99406837?v=4" alt="magictaro" width="60" height="60"> | <img src="https://avatars.githubusercontent.com/u/30254570?v=4" alt="flora" width="60" height="60"> | <img src="https://avatars.githubusercontent.com/u/76088728?v=4" alt="magictaro" width="60" height="60"> | <img src="https://avatars.githubusercontent.com/u/73919235?v=4" alt="magictaro" width="60" height="60"> | <img src="https://avatars.githubusercontent.com/u/42020919?v=4" alt="magictaro" width="60" height="60"> |
| <a href="https://github.com/yondo123">yondo123<a/>| <a href="https://github.com/tesseractjh">tesseractjh<a/> | <a href="https://github.com/Moondoyeon">Moondoyeon</a>| <a href="https://github.com/choi1five">choi1five<a/>                                                                                               | <a href="https://github.com/younhoso">younhoso<a/>                                                                                            | <a href="https://github.com/seonsy44">seonsy44<a/>                                                                                                | <a href="https://github.com/kwakhyun">kwakhyun<a/>                                                                                                | <a href="https://github.com/2ujin">2ujin<a/>                                                                                                   |

# **ğŸ–¥Â Demo**

![search-keyword](https://user-images.githubusercontent.com/102936206/201240156-017813ca-c9eb-4b8c-98a6-6d043f95c4f2.gif)

# **âš¡ï¸Â Skills**


<div align="center">

![TypeScript](https://img.shields.io/badge/TypeScript-2F74C0.svg?&style=for-the-badge&logo=TypeScript&logoColor=white)
![React](https://img.shields.io/badge/react-%2320232a.svg?style=for-the-badge&logo=react&logoColor=%2361DAFB)
![Recoil](https://img.shields.io/badge/recoil-f26b00?style=for-the-badge&logo=data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MDAiIGhlaWdodD0iNjAwIiB2aWV3Qm94PSIwIDAgNjAwIDYwMCI+PGxpbmsgeG1sbnM9IiIgdHlwZT0idGV4dC9jc3MiIGlkPSJkYXJrLW1vZGUiIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iIi8+PGcgZmlsbD0id2hpdGUiPjxwYXRoIGQ9Ik0xNDIuNTM2IDE5OC44NThjMCAyNi4zNi0yMS4zNjggNDcuNzItNDcuNzIgNDcuNzItMjYuMzYgMC00Ny43MjItMjEuMzYtNDcuNzIyLTQ3LjcyczIxLjM2LTQ3LjcyIDQ3LjcyLTQ3LjcyYzI2LjM1NSAwIDQ3LjcyMiAyMS4zNiA0Ny43MjIgNDcuNzIiLz48cGF0aCBkPSJNNTA1LjE4IDQxNC4yMjVIMjM4LjEyNGMtMzUuMjUgMC02My45MjYtMjguNjc0LTYzLjkyNi02My45MjNzMjguNjc4LTYzLjkyNiA2My45MjYtNjMuOTI2aDEyMC43OGMyMC44MTYgMCAzNy43NTMtMTYuOTM4IDM3Ljc1My0zNy43NTZzLTE2LjkzOC0zNy43NTYtMzcuNzUzLTM3Ljc1Nkg5NC44MWMtNy4yMjcgMC0xMy4wODYtNS44Ni0xMy4wODYtMTMuMDg1IDAtNy4yMjcgNS44Ni0xMy4wODYgMTMuMDg1LTEzLjA4NmgyNjQuMDkzYzM1LjI1IDAgNjMuOTIzIDI4LjY3OCA2My45MjMgNjMuOTI2cy0yOC42NzQgNjMuOTIzLTYzLjkyMyA2My45MjNoLTEyMC43OGMtMjAuODIgMC0zNy43NTYgMTYuOTM4LTM3Ljc1NiAzNy43NiAwIDIwLjgxNiAxNi45MzggMzcuNzUzIDM3Ljc1NiAzNy43NTNINTA1LjE4YzcuMjI3IDAgMTMuMDg2IDUuODYgMTMuMDg2IDEzLjA4NSAwIDcuMjI2LTUuODU4IDEzLjA4NS0xMy4wODUgMTMuMDg1eiIvPjxwYXRoIGQ9Ik00NTcuNDY0IDQwMS4xNDJjMC0yNi4zNiAyMS4zNi00Ny43MiA0Ny43Mi00Ny43MnM0Ny43MiAyMS4zNiA0Ny43MiA0Ny43Mi0yMS4zNiA0Ny43Mi00Ny43MiA0Ny43Mi00Ny43Mi0yMS4zNi00Ny43Mi00Ny43MiIvPjwvZz48c3R5bGUgeG1sbnM9IiIgaWQ9ImRhcmstbW9kZS1jdXN0b20tY29sb3IiPgoJCTpyb290ewoJCQktLWJnLWNvbG9yOnJnYmEoMjYsMjYsMjYsMSk7CgkJCS0tdGV4dC1jb2xvcjpyZ2JhKDExMCwxMTAsMTEwLDEpOwoJCQktLWEtY29sb3I6cmdiYSg5MCwxMjAsMTIwLDEpOwoJCQktLWEtdmlzaXRlZC1jb2xvcjpyZ2JhKDEyMCwxMjAsOTAsMSk7CgkJCS0tYS1ob3Zlci1jb2xvcjpyZ2JhKDIxMSwyMTEsMjExLDEpOwoJCQktLWlucHV0LWJvcmRlci1jb2xvcjpyZ2JhKDIxMSwyMTEsMjExLDAuMik7CgkJCS0taW5wdXQtcGxhY2Vob2xkZXItY29sb3I6cmdiYSgxNzMsMjE2LDIzMCwxKTsKCQkJLS1kaWFsb2ctYmctY29sb3I6cmdiYSgzNiwzNiwzNiwwLjk1KTsKCQkJLS1iZy1pbWFnZTpsaW5lYXItZ3JhZGllbnQocmdiYSgyNiwyNiwyNiwxKSxyZ2JhKDI2LDI2LDI2LDEpKTsKCQl9Cgk8L3N0eWxlPjwvc3ZnPg==)
![axios](https://camo.githubusercontent.com/23392fa4fc3ffb6ade29cba7aaffa7741daeb97012c70a062cf2370187d6519e/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6178696f732d4646434132383f7374796c653d666f722d7468652d6261646765266c6f676f3d6178696f73266c6f676f436f6c6f723d7768697465)
![Styled Components](https://img.shields.io/badge/styled--components-DB7093?style=for-the-badge&logo=styled-components&logoColor=white)

</div>


# **ğŸš€Â ê¸°ëŠ¥ìš”êµ¬ì‚¬í•­**

- ì•„ë˜ ì‚¬ì´íŠ¸ì˜ ê²€ìƒ‰ì˜ì—­ì„ í´ë¡ í•˜ê¸°
    
    [í•œêµ­ì„ìƒì •ë³´](https://clinicaltrialskorea.com/)
    
- ì§ˆí™˜ëª… ê²€ìƒ‰ì‹œ API í˜¸ì¶œ í†µí•´ì„œ ê²€ìƒ‰ì–´ ì¶”ì²œ ê¸°ëŠ¥ êµ¬í˜„
    - ì‚¬ìš©ìê°€ ì…ë ¥í•œ í…ìŠ¤íŠ¸ì™€ ì¼ì¹˜í•˜ëŠ” ë¶€ë¶„ ë³¼ë“œì²˜ë¦¬
        - ì˜ˆ) ì‚¬ìš©ì ì…ë ¥: ë‹´ë‚­
              ì¶”ì²œ ê²€ìƒ‰ì–´:Â  **ë‹´ë‚­**ì˜ ì•…ì„± ì‹ ìƒë¬¼, **ë‹´ë‚­**ì—¼, **ë‹´ë‚­**ì˜ ê¸°íƒ€ ì§ˆí™˜
    - ê²€ìƒ‰ì–´ê°€ ì—†ì„ ì‹œ â€œê²€ìƒ‰ì–´ ì—†ìŒâ€ í‘œì¶œ
- API í˜¸ì¶œ ìµœì í™”
    - API í˜¸ì¶œë³„ë¡œ ë¡œì»¬ ìºì‹± êµ¬í˜„
    - ì…ë ¥ë§ˆë‹¤ API í˜¸ì¶œí•˜ì§€ ì•Šë„ë¡ API í˜¸ì¶œ íšŸìˆ˜ë¥¼ ì¤„ì´ëŠ” ì „ëµ ìˆ˜ë¦½ ë° ì‹¤í–‰
- í‚¤ë³´ë“œë§Œìœ¼ë¡œ ì¶”ì²œ ê²€ìƒ‰ì–´ë“¤ë¡œ ì´ë™ ê°€ëŠ¥í•˜ë„ë¡

# ğŸ“¦Â íŒŒì¼ êµ¬ì¡°

```
ğŸ“¦src
 â”£ ğŸ“‚api
 â”ƒ â”— ğŸ“œsuggestion.ts
 â”£ ğŸ“‚assets
 â”ƒ â”— ğŸ“‚icons
 â”ƒ â”ƒ â”£ ğŸ“œmagnifier.svg
 â”ƒ â”ƒ â”— ğŸ“œxmark-solid.svg
 â”£ ğŸ“‚components
 â”ƒ â”— ğŸ“‚SearchBar
 â”ƒ â”ƒ â”£ ğŸ“œClearButton.tsx
 â”ƒ â”ƒ â”£ ğŸ“œInput.tsx
 â”ƒ â”ƒ â”£ ğŸ“œParsedName.tsx
 â”ƒ â”ƒ â”£ ğŸ“œSearchButton.tsx
 â”ƒ â”ƒ â”£ ğŸ“œSuggestion.tsx
 â”ƒ â”ƒ â”£ ğŸ“œSuggestionList.tsx
 â”ƒ â”ƒ â”— ğŸ“œindex.tsx
 â”£ ğŸ“‚hooks
 â”ƒ â”£ ğŸ“œuseClear.ts
 â”ƒ â”£ ğŸ“œuseInput.ts
 â”ƒ â”£ ğŸ“œuseKeyboard.ts
 â”ƒ â”£ ğŸ“œuseSearchInput.ts
 â”ƒ â”£ ğŸ“œuseSetSuggestions.ts
 â”ƒ â”£ ğŸ“œuseSuggestionFocus.ts
 â”ƒ â”— ğŸ“œuseSuggestions.ts
 â”£ ğŸ“‚recoil
 â”ƒ â”£ ğŸ“‚searchBar
 â”ƒ â”ƒ â”— ğŸ“œindex.ts
 â”ƒ â”— ğŸ“‚suggestion
 â”ƒ â”ƒ â”— ğŸ“œindex.ts
 â”£ ğŸ“‚styles
 â”ƒ â”£ ğŸ“‚theme
 â”ƒ â”ƒ â”£ ğŸ“œcolor.ts
 â”ƒ â”ƒ â”£ ğŸ“œindex.ts
 â”ƒ â”ƒ â”£ ğŸ“œmixin.ts
 â”ƒ â”ƒ â”— ğŸ“œresponsive.ts
 â”ƒ â”— ğŸ“œGlobalStyle.ts
 â”£ ğŸ“‚types
 â”ƒ â”— ğŸ“œindex.d.ts
 â”£ ğŸ“‚utils
 â”ƒ â”£ ğŸ“œdebounce.ts
 â”ƒ â”— ğŸ“œsortTiralData.ts
 â”£ ğŸ“œApp.tsx
 â”£ ğŸ“œindex.tsx
 â”— ğŸ“œreact-app-env.d.ts
```

# **ğŸ‘Â Best Practice**

## 1. Debounce

- debounce í•¨ìˆ˜ë¥¼ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.
    - ì§§ì€ ì‹œê°„ ê°„ê²©ìœ¼ë¡œ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸ë¥¼ ê·¸ë£¹í™”í•´ì„œ ë§ˆì§€ë§‰ì— í•œ ë²ˆë§Œ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ê°€ í˜¸ì¶œë˜ë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.
    
    ```tsx
    // utils/debounce.ts
    const debounce = (callback: (...args: unknown[]) => void, delay: number) => {
      let timerId: NodeJS.Timeout;
      return (...args: unknown[]) => {
        if (timerId) {
          clearTimeout(timerId);
        }
        timerId = setTimeout(callback, delay, ...args);
      };
    };
    
    export default debounce;
    ```
    
    ```tsx
    // hooks/useSetSuggestions.ts
    debounce(async () => {
        await handleSuggestionChange();
      }, 300);
    }
    ```
    

## 2. API ë¡œì»¬ ìºì‹±

- ì „ì—­ ìƒíƒœ


```tsx
// recoil/searchBar/index.ts
// Inputì— ì…ë ¥ëœ ê²€ìƒ‰ì–´ atom
export const searchInputState = atom<string>({
  key: 'searchInputState',
  default: '',
});
```

```tsx
// recoil/searchBar/index.ts
// ê²€ìƒ‰ì–´ì— ë”°ë¥¸ ì¶”ì²œ ê²€ìƒ‰ì–´ atomFamily
// ê²€ìƒ‰ì–´ë¥¼ parameterë¡œ ë°›ì•„ì„œ ë™ì ìœ¼ë¡œ atom ìƒì„±
export const suggestionState = atomFamily<Sick[] | null, string>({
  key: 'suggestionState',
  default: null,
});
```

ê° ê²€ìƒ‰ì–´ë³„ë¡œ ë™ì ìœ¼ë¡œ atomì„ ìƒì„±í•  ìˆ˜ ìˆë„ë¡ `atomFamily`ë¥¼ í†µí•´ ê²€ìƒ‰ì–´ë³„ ì¶”ì²œ ê²€ìƒ‰ì–´ ëª©ë¡ì„ ì €ì¥í•˜ì˜€ìŠµë‹ˆë‹¤.

- ë¡œì»¬ ìºì‹± êµ¬í˜„

```tsx
// recoil/searchBar/index.ts
type Option = {
  cacheTime: number;
};

function useSetSuggestions(option?: Option) {
  const { cacheTime = 5 * 60 * 1000 } = option ?? {};
  // useRecoilCallbackìœ¼ë¡œ ë‚´ë¶€ì—ì„œ Recoil ìƒíƒœì— ì ‘ê·¼
  const handleSuggestionChange = useRecoilCallback(
    ({ snapshot, set, reset }) =>
      async () => {
				// í˜„ì¬ ê²€ìƒ‰ì–´(searchInputState) ê°’ ê°€ì ¸ì˜¤ê¸°
        const inputValue = await snapshot.getPromise(searchInputState);

        // ê²€ìƒ‰ì–´ê°€ ì—†ìœ¼ë©´(ë¹ˆ ë¬¸ìì—´ì´ë©´) API í˜¸ì¶œ X
        if (!inputValue.trim()) {
          return;
        }

        // í˜„ì¬ ê²€ìƒ‰ì–´ì— ëŒ€í•œ ì¶”ì²œ ê²€ìƒ‰ì–´(suggestionState(inputValue)) ê°’ ê°€ì ¸ì˜¤ê¸°
        const prevValue = await snapshot.getPromise(suggestionState(inputValue));

				// ê²€ìƒ‰ì–´ì— ëŒ€í•œ ì¶”ì²œ ê²€ìƒ‰ì–´ê°€ ì´ë¯¸ ì¡´ì¬í•œë‹¤ë©´(í˜¸ì¶œëœ ì ì´ ìˆë‹¤ë©´) API í˜¸ì¶œ X
        if (prevValue) {
          return;
        }

				// API í˜¸ì¶œ
        const { data, status, errorMsg } = await getSuggestions(inputValue);
        console.info('calling api');
        if (status >= 200 && status < 300) {
					// ì¶”ì²œ ê²€ìƒ‰ì–´ ê°±ì‹ 
          set(suggestionState(inputValue), data.sort(sortTrialData(inputValue)));
					// cacheTime ì´í›„ì— ì¶”ì²œ ê²€ìƒ‰ì–´ resetí•˜ëŠ” Timeout ì„¤ì •
					// resetí•˜ë©´ suggestionState(inputValue)ëŠ” ê¸°ë³¸ê°’ì¸ nullë¡œ ë³€í•¨
          setTimeout(() => reset(suggestionState(inputValue)), cacheTime);
        } else {
          alert(errorMsg.default);
        }
      },
    []
  );

  // debounceë¡œ API í˜¸ì¶œ íšŸìˆ˜ ìµœì í™”
  return debounce(async () => {
    await handleSuggestionChange();
  }, 300);
}
```

```tsx
// hooks/useSearchInput.ts

function useSearchInput() {
  const [inputState, setInputState] = useRecoilState(searchInputState);
  const setSuggestions = useSetSuggestions({ cacheTime: 2 * 60 * 1000 });

  // ê²€ìƒ‰ì–´ ì…ë ¥ Input ì»´í¬ë„ŒíŠ¸ì˜ onChange ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
  const handleInputChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {
    const {
      currentTarget: { value },
    } = e;
    setInputState(value);
    setSuggestions();
  }, []);

  return { value: inputState, handleChange: handleInputChange };
}
```

- Input ì»´í¬ë„ŒíŠ¸ì—ì„œ change ì´ë²¤íŠ¸ê°€ ë°œìƒí•  ë•Œë§ˆë‹¤ setSuggestionì´ ì‹¤í–‰ë˜ë©° í˜„ì¬ ê²€ìƒ‰ì–´ì— ëŒ€í•œ ì¶”ì²œ ê²€ìƒ‰ì–´ ëª©ë¡ì´ ì¡´ì¬í•˜ëŠ”ì§€ ì—¬ë¶€ë¥¼ í†µí•´ APIë¥¼ í˜¸ì¶œ ì—¬ë¶€ë¥¼ ê²°ì •í•©ë‹ˆë‹¤. 
- ë§Œì•½ APIê°€ í˜¸ì¶œë˜ì—ˆë‹¤ë©´ setTimeoutì„ í†µí•´ cacheTime ì´í›„ì— í˜„ì¬ ê²€ìƒ‰ì–´ì— ëŒ€í•œ ì¶”ì²œ ê²€ìƒ‰ì–´ ëª©ë¡ì„ ì´ˆê¸°í™”(null)í•©ë‹ˆë‹¤.

```tsx
// hooks/useSearchInput.ts

function useSuggestions() {
  const inputValue = useRecoilValue(searchInputState);
  const suggestionValue = useRecoilValue(suggestionState(inputValue));
  // suggestionValueë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ì§€ ì•Šê³  ë³„ë„ì˜ stateë¥¼ ë§Œë“¦
  // suggestionState(inputValue)ê°€ cacheTimeì´ ë‹¤ ë˜ì–´ resetë  ë•Œ nullì´ ë¨
  // ê·¸ ë•Œ í™”ë©´ì— ì¶”ì²œ ê²€ìƒ‰ì–´ê°€ ì‚¬ë¼ì§€ì§€ ì•Šê³  ì´ì „ ê°’ì„ ê³„ì† ë‚˜íƒ€ë‚´ë„ë¡ í•˜ê¸° ìœ„í•¨
  const [suggestions, setSuggestions] = useState<Sick[]>([]);

  useEffect(() => {
		// suggestionValueê°€ nullì´ ì•„ë‹ ë•Œì—ë§Œ suggestionsë¥¼ ë³€ê²½í•¨
    // cacheTimeì´ ë‹¤ ë˜ì–´ suggestionValueê°€ nullì´ ë˜ë”ë¼ë„ ì´ì „ ê°’ì„ ê³„ì† ë³´ì—¬ì¤Œ
    if (suggestionValue) {
      setSuggestions(suggestionValue);
    }
  }, [suggestionValue]);

  return { inputValue, suggestions };
}
```

- cacheTimeì´ ë‹¤ ë˜ì–´ resetë  ë•Œ í˜„ì¬ ê²€ìƒ‰ì–´ì— ëŒ€í•œ ì¶”ì²œ ê²€ìƒ‰ì–´ ëª©ë¡(suggestionState(inputValue))ì´ nullë¡œ ì´ˆê¸°í™”ë©ë‹ˆë‹¤.  
- ì´ ë•Œ ë§Œì•½ í•´ë‹¹ ì¶”ì²œ ê²€ìƒ‰ì–´ ëª©ë¡ì´ í™”ë©´ì— í‘œì‹œë˜ê³  ìˆë‹¤ë©´ ê²€ìƒ‰ì–´ ëª©ë¡ì´ ë·°ì—ì„œ ê°™ì´ ì‚¬ë¼ì§€ì§€ ì•Šë„ë¡ ë³„ë„ì˜ stateë¥¼ ë§Œë“¤ì–´ì„œ suggestionState(inputValue)ê°€ nullì´ ì•„ë‹ ë•Œì—ë§Œ ë³€ê²½í•˜ì˜€ìŠµë‹ˆë‹¤.



> stale-while-revalidate ë¡œì§ ì ìš©ì„ ì‹œë„í•œ ì½”ë“œ ì‚¬ë¡€ë„ ìˆì—ˆìŠµë‹ˆë‹¤.
ë¡œì§ êµ¬í˜„ì´ ì™„ì„±ë˜ì§€ ì•Šì•„ ì½”ë“œë¥¼ ì±„íƒí•˜ì§€ëŠ” ì•Šì•˜ìŠµë‹ˆë‹¤.
<img width="507" alt="Untitled" src="https://user-images.githubusercontent.com/102936206/201242768-dd18fc11-8970-46a1-8341-f5e6169796bd.png">

```tsx
const cacheConfig: CacheConfig = {
  cache: new Map<string, Response>(),
  fetch: () => undefined,
};

const CacheContext = createContext(cacheConfig);

export const useCache = () => useContext(CacheContext);

export function CacheProvider({ children }: CacheProviderProps) {
  const fetch: CacheConfig['fetch'] = async (url, api, apiConfig, { onSuccess, onError }) => {
    // ìºì‹±ì´ ë˜ì–´ ìˆëŠ” ê²½ìš° ìºì‹±ëœ ê°’ì„ ë¨¼ì € ë‚´ì–´ì£¼ê³ , staleí•œ ìºì‹œ ê°’ì„ ì—…ë°ì´íŠ¸
		if (cacheConfig.cache.has(url)) {
      onSuccess(cacheConfig.cache.get(url));

      const { data, status } = await api(apiConfig);
      if (status >= 200 && status < 300) cacheConfig.cache.set(url, data);

      return;
    }
		
		// ìºì‹±ì´ ì•ˆë˜ì–´ ìˆëŠ” ê²½ìš° ìš”ì²­ì„ ë³´ëƒ„
    const { data, status } = await api(apiConfig);
    console.info('calling api');

    if (status >= 200 && status < 300) {
      cacheConfig.cache.set(url, data);
      onSuccess(data);
    } else if (onError) {
      onError(status);
    }
  };

  return React.createElement(
    CacheContext.Provider,
    { value: { cache: cacheConfig.cache, fetch } },
    React.Children.only(children)
  );
}
```

## 3. ì¶”ì²œ ê²€ìƒ‰ì–´ ìƒí•˜ ì´ë™

- useRefë¥¼ í†µí•´ `ul` íƒœê·¸ë¥¼ ì°¸ì¡°í•©ë‹ˆë‹¤.
- useStateë¥¼ í†µí•´ `focusIndex` ìƒíƒœ ê´€ë¦¬ë¥¼ í•©ë‹ˆë‹¤.
- íŠ¹ì • í‚¤ë³´ë“œì´ë²¤íŠ¸ ë°œìƒì‹œ `focusIndex`ê°€ ë³€í•˜ë„ë¡ í•©ë‹ˆë‹¤. (default: -1)
- `ul` > `li[focusIndex]` > `a` íƒœê·¸ì— focus í•©ë‹ˆë‹¤.

```tsx
// hooks/useKeyboard.ts

import { useEffect, useState } from 'react';
import useSuggestions from './useSuggestions';

function useKeyboard(inputRef: React.RefObject<HTMLInputElement>, elRef: React.RefObject<HTMLElement>) {
  const { inputValue } = useSuggestions();
  const [focusIndex, setFocusIndex] = useState<number>(-1);
  const ANCHOR_INDEX = 0;

  const handleKeyDown = (e: React.KeyboardEvent) => {
    if (e.nativeEvent.isComposing) return;

    switch (e.key) {
      case 'Tab':
        setFocusIndex((cur) => {
          if (elRef.current?.childElementCount === cur + 1) return cur;
          e.preventDefault();
          return cur + 1;
        });
        break;

      case 'ArrowDown':
        e.preventDefault();
        setFocusIndex((cur) => {
          if (elRef.current?.childElementCount === cur + 1) return cur;
          return cur + 1;
        });
        break;
      case 'ArrowUp':
        e.preventDefault();
        setFocusIndex((cur) => {
          if (cur === 0 || cur === -1) {
            inputRef.current?.focus();
            return -1;
          }
          return cur - 1;
        });
        break;
      default:
        break;
    }
  };

  useEffect(() => {
		// ul > li[focusIndex] > a.focus()
    const focusedEl = elRef.current?.children[focusIndex]?.children[ANCHOR_INDEX] as HTMLElement | undefined;
    focusedEl?.focus();
  }, [focusIndex]);

  useEffect(() => {
    setFocusIndex(-1);
  }, [inputValue]);

  return { handleKeyDown };
}

export default useKeyboard;
```

```tsx
// components/SearchBar/index.tsx

function SearchBar() {
  const { searchInputRef, isFocused } = useInput();
  const suggestionListRef = useRef<HTMLUListElement>(null);
  const { handleKeyDown } = useKeyboard(searchInputRef, suggestionListRef);

  return (
    <Container>
      <Input searchInputRef={searchInputRef} />
      <SuggestionList suggestionListRef={suggestionListRef} /> {/* -> ul íƒœê·¸ */}
      <ClearButton />
      <SearchButton />
    </Container>
  );
}
```

## 4. ê²€ìƒ‰ì–´ ë³¼ë“œì²˜ë¦¬

- `RegExp`ë¥¼ ì‚¬ìš©: êµ¬ë¶„ìë„ ê²°ê³¼ì— í¬í•¨í•œì±„ë¡œ `split`í•˜ì—¬ `query`(ê²€ìƒ‰í‚¤ì›Œë“œ)ì™€ ì¼ì¹˜í•  ê²½ìš° Bold ì²˜ë¦¬í•©ë‹ˆë‹¤.

```tsx
// componentx/Searchbar/ParsedName.tsx

function ParsedName({ suggestionName, query }: Props) {
  const splitList = suggestionName.split(new RegExp(`(${query})`));

  return (
    <>
      {splitList.map((word) => (
        <React.Fragment key={word}> {word === query ? <Bold>{query}</Bold> : <div>{word}</div>}</React.Fragment>
      ))}
    </>
  );
}
```

## 5. AWS Amplifyë¥¼ ì‚¬ìš©í•˜ì—¬ ìë™ë°°í¬

- AWSì—ì„œ ì œê³µí•˜ëŠ” Amplifyë¥¼ ì‚¬ìš©í•˜ì—¬ `Main` ë¸Œëœì¹˜ì— í‘¸ì‹œ ë  ë•Œ ë¹Œë“œ í›„ ìë™ë°°í¬ ë˜ë„ë¡ êµ¬ì¶•í•˜ì˜€ìŠµë‹ˆë‹¤.

# **ğŸ“¢Â í”„ë¡œì íŠ¸ ì‹¤í–‰ë°©ë²•**

ì‹¤í–‰í•  ë•Œ ë°˜ë“œì‹œ ë‹¤ìŒ íŒŒì¼ì„ ìµœìƒë‹¨ì— ìƒì„±í›„ ì‹¤í–‰ í•´ì£¼ì…”ì•¼ í•©ë‹ˆë‹¤.

```jsx
// .env.local
REACT_APP_SERVER = http://localhost:4000
REACT_APP_CLINICAL_TRIALS_KOREA = https://clinicaltrialskorea.com/studies
```

```jsx
// ì„¤ì¹˜
npm install

// ì‹¤í–‰
npm start
```

# **ğŸ“šÂ íŒ€ ê·œì¹™**

- **ğŸ“•Â Git commit convention**
    
    
    | rule | ì„¤ëª… |
    | --- | --- |
    | Feat | ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€ |
    | Fix | ë²„ê·¸ ê³ ì¹œ ê²½ìš° |
    | Design | css ìˆ˜ì • |
    | Chore | ë¹Œë“œ ì—…ë¬´ ìˆ˜ì •, íŒ¨í‚¤ì§€ ë§¤ë‹ˆì € ìˆ˜ì • |
    | !HOTFIX | ê¸‰í•˜ê²Œ ì¹˜ëª…ì ì¸ ë²„ê·¸ë¥¼ ê³ ì³ì•¼í•˜ëŠ” ê²½ìš° |
    | Docs | ë¬¸ì„œ ìˆ˜ì • |
    | Style | ì½”ë“œ formatting, ì„¸ë¯¸ì½œë¡ (;) ëˆ„ë½, ì½”ë“œ ë³€ê²½ì´ ì—†ëŠ” ê²½ìš° |
    | Rename | íŒŒì¼ ë° í´ë” êµ¬ì¡° ë³€ê²½ |
    | Refactor | ì½”ë“œ ë¦¬íŒ©í† ë§ |
    | Test | í…ŒìŠ¤íŠ¸ ì½”ë“œ, ë¦¬íŒ©í† ë§ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì¶”ê°€ |
    | Remove | íŒŒì¼ ì‚­ì œ |
    | Modify | ì½”ë“œ ë‹¨ìˆœ ìˆ˜ì • |
- **ğŸ“˜Â Git branch strategy**
- main (ë°°í¬/ìš´ì˜) â† develop (í†µí•© ê°œë°œ) â† feat-ê°œë°œë‚´ìš© (ë‹¨ìœ„ ê°œë°œ)
